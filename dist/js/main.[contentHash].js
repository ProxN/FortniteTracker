(()=>{"use strict";class e{constructor(e){this.epicName=e,this.data={},this.error={}}async getStats(){const e=`https://cors-anywhere.herokuapp.com/https://api.fortnitetracker.com/v1/profile/pc/${this.epicName}`,t=await fetch(e,{method:"GET",headers:{"TRN-Api-Key":"0d247163-65a5-47b4-ad8c-c2d3bfe7cf2d"}});this.data=await t.json()}}const t=["Ninja","Tfue","CouRageJD","Dark","Nick Eh 30","LiquidChap"],n=class{constructor(){this.favorites={recent:[],favorite:[],popular:t}}addPlayerToFavorite(e){this.favorites.favorite.push(e),this.setLocalStorage()}isAddedToFavorite(e){return-1!==this.favorites.favorite.findIndex((t=>t===e))}addRecentPlayer(e){-1!==this.favorites.recent.findIndex((t=>t===e))||(this.favorites.recent.length>7?this.favorites.recent[0]=e:this.favorites.recent.push(e),this.setLocalStorage())}removeFavoritePlayer(e){this.favorites.favorite=this.favorites.favorite.filter((t=>t!==e)),this.setLocalStorage()}setLocalStorage(){localStorage.setItem("favorites",JSON.stringify(this.favorites))}readLocalStorage(){const e=JSON.parse(localStorage.getItem("favorites"));e&&(this.favorites=e)}},a={searchNav:document.getElementById("navSearch"),navInput:document.querySelector(".navSearch__input"),searchForm:document.getElementById("searchForm"),searchInput:document.querySelector(".search__content--input"),main:document.querySelector(".main"),body:document.querySelector("body")},r=["https://d6d90m6b4vcx.cloudfront.net/prod/release-2.2-c2f94c86/react-fortnite/def_ava/def_ava1.png","https://d6d90m6b4vcx.cloudfront.net/prod/release-2.2-c2f94c86/react-fortnite/def_ava/def_ava2.png","https://d6d90m6b4vcx.cloudfront.net/prod/master-ddb5a76c/react-fortnite/def_ava/def_ava8.png","https://d6d90m6b4vcx.cloudfront.net/prod/release-2.2-c2f94c86/react-fortnite/def_ava/def_ava5.png","https://d6d90m6b4vcx.cloudfront.net/prod/release-2.2-c2f94c86/react-fortnite/def_ava/def_ava3.png","https://d6d90m6b4vcx.cloudfront.net/prod/release-1-6308ae95/react-fortnite/def_ava/def_ava4.png","https://d6d90m6b4vcx.cloudfront.net/prod/release-2.2-c2f94c86/react-fortnite/def_ava/def_ava9.png","https://d6d90m6b4vcx.cloudfront.net/prod/release-2.2-c2f94c86/react-fortnite/def_ava/def_ava6.png","https://d6d90m6b4vcx.cloudfront.net/prod/release-2.2-c2f94c86/react-fortnite/def_ava/def_ava10.png"],s=e=>{e.insertAdjacentHTML("afterBegin",'<div class="loader loader--style1" title="0">\n    <svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n     width="40px" height="40px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve">\n    <path opacity="0.2" fill="#8a48a5" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n      s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n      c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"/>\n    <path fill="#8a48a5" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n      C22.32,8.481,24.301,9.057,26.013,10.047z">\n      <animateTransform attributeType="xml"\n        attributeName="transform"\n        type="rotate"\n        from="0 20 20"\n        to="360 20 20"\n        dur="0.5s"\n        repeatCount="indefinite"/>\n      </path>\n    </svg>\n    </div>')},i=()=>{const e=document.querySelector(".loader");e&&e.parentNode.removeChild(e)},c=()=>{a.main.innerHTML="",a.searchInput.value=""},o=(e,t)=>`\n  <div class="playlist__card">\n    <div class="playlist__header ${t}">\n        <h4 class="playlist__type">${t}</h4>\n        <p class="playlist__matches">${e.matches.displayValue} <span>matches</span></p>\n    </div>\n    <div class="playlist__body">\n    ${(e=>{const t=(n=e,Object.keys({top1:null,kills:null,matches:null,score:null,winRatio:null,kpg:null,kpm:null,kd:null,scorePerMatch:null}).map((e=>n[e])));var n;const a=t.map((e=>(e=>`\n  <div class="playlist__field">\n    <p class="playlist__title">${e.label}</p>\n    <p class="playlist__value">${e.displayValue}</p>\n    <div class="playlist__bar">\n        <div style="width:${e.percentile}%"></div>\n    </div>\n  </div>\n`)(e)));return a.join("")})(e)}\n    </div>\n   </div>  \n`,l=(e,t)=>{t?(e.innerHTML="",e.innerHTML='\n  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n  viewBox="0 0 512 512" height="100%" width="80%" fill="#8a48a5" xml:space="preserve">\n  heg\n    <path d="M463,192l-147.1,0L271.2,58.6C269,52.1,262.9,48,256,48s-13,4.1-15.2,10.6L196.1,192H48h0c-8.8,0-16,7.2-16,16\n    c0,0.9,0.1,1.9,0.3,2.7c0.2,3.5,1.8,7.4,6.7,11.3l120.9,85.2l-46.4,134.9c-2.3,6.5,0,13.8,5.5,18c2.9,2.1,5.6,3.9,9,3.9\n    c3.3,0,7.2-1.7,10-3.6l118-84.1l118,84.1c2.8,2,6.7,3.6,10,3.6c3.4,0,6.1-1.7,8.9-3.9c5.6-4.2,7.8-11.4,5.5-18l-46.4-134.9l119.9-86\n    l2.9-2.5c2.6-2.8,5.2-6.6,5.2-10.7C480,199.2,471.8,192,463,192z"/>\n  </svg>\n'):(e.innerHTML="",e.innerHTML='\n    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" height="100%"\n    width="80%" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"\n    xml:space="preserve">\n        <path\n            d="M463,192l-147.1,0L271.2,58.6C269,52.1,262.9,48,256,48s-13,4.1-15.2,10.6L196.1,192H48h0c-8.8,0-16,7.2-16,16\n        c0,0.9,0.1,1.9,0.3,2.7c0.2,3.5,1.8,7.4,6.7,11.3l120.9,85.2l-46.4,134.9c-2.3,6.5,0,13.8,5.5,18c2.9,2.1,5.6,3.9,9,3.9\n        c3.3,0,7.2-1.7,10-3.6l118-84.1l118,84.1c2.8,2,6.7,3.6,10,3.6c3.4,0,6.1-1.7,8.9-3.9c5.6-4.2,7.8-11.4,5.5-18l-46.4-134.9l119.9-86\n        l2.9-2.5c2.6-2.8,5.2-6.6,5.2-10.7C480,199.2,471.8,192,463,192z M335.8,284.5c-10,7.2-14.2,20.2-10.2,31.8l30.1,87.7\n        c1.3,3.7-2.9,6.8-6.1,4.6l-77.4-55.2c-4.9-3.5-10.6-5.2-16.3-5.2c-5.7,0-11.4,1.7-16.2,5.2l-77.4,55.1c-3.2,2.3-7.4-0.9-6.1-4.6\n        l30.1-87.7c4-11.8-0.2-24.8-10.3-32l-81-57.1c-3.2-2.2-1.6-7.3,2.3-7.3h98.7c12,0,22.7-7.7,26.5-19.1l29.6-88.2\n        c1.2-3.6,6.4-3.6,7.6,0l29.6,88.2c3.8,11.4,14.5,19.1,26.5,19.1h0l97.3,0c3.9,0,5.5,5,2.3,7.2L335.8,284.5z" />\n    </svg>\n')},d=(e,t,n)=>{const a="popular"===t?"":(e=>`\n    <a class="favorite__player--icon">\n        ${e?'\n  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n  viewBox="0 0 512 512" height="100%" width="80%" fill="#8a48a5" xml:space="preserve">\n  heg\n    <path d="M463,192l-147.1,0L271.2,58.6C269,52.1,262.9,48,256,48s-13,4.1-15.2,10.6L196.1,192H48h0c-8.8,0-16,7.2-16,16\n    c0,0.9,0.1,1.9,0.3,2.7c0.2,3.5,1.8,7.4,6.7,11.3l120.9,85.2l-46.4,134.9c-2.3,6.5,0,13.8,5.5,18c2.9,2.1,5.6,3.9,9,3.9\n    c3.3,0,7.2-1.7,10-3.6l118-84.1l118,84.1c2.8,2,6.7,3.6,10,3.6c3.4,0,6.1-1.7,8.9-3.9c5.6-4.2,7.8-11.4,5.5-18l-46.4-134.9l119.9-86\n    l2.9-2.5c2.6-2.8,5.2-6.6,5.2-10.7C480,199.2,471.8,192,463,192z"/>\n  </svg>\n':'\n    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" height="100%"\n    width="80%" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"\n    xml:space="preserve">\n        <path\n            d="M463,192l-147.1,0L271.2,58.6C269,52.1,262.9,48,256,48s-13,4.1-15.2,10.6L196.1,192H48h0c-8.8,0-16,7.2-16,16\n        c0,0.9,0.1,1.9,0.3,2.7c0.2,3.5,1.8,7.4,6.7,11.3l120.9,85.2l-46.4,134.9c-2.3,6.5,0,13.8,5.5,18c2.9,2.1,5.6,3.9,9,3.9\n        c3.3,0,7.2-1.7,10-3.6l118-84.1l118,84.1c2.8,2,6.7,3.6,10,3.6c3.4,0,6.1-1.7,8.9-3.9c5.6-4.2,7.8-11.4,5.5-18l-46.4-134.9l119.9-86\n        l2.9-2.5c2.6-2.8,5.2-6.6,5.2-10.7C480,199.2,471.8,192,463,192z M335.8,284.5c-10,7.2-14.2,20.2-10.2,31.8l30.1,87.7\n        c1.3,3.7-2.9,6.8-6.1,4.6l-77.4-55.2c-4.9-3.5-10.6-5.2-16.3-5.2c-5.7,0-11.4,1.7-16.2,5.2l-77.4,55.1c-3.2,2.3-7.4-0.9-6.1-4.6\n        l30.1-87.7c4-11.8-0.2-24.8-10.3-32l-81-57.1c-3.2-2.2-1.6-7.3,2.3-7.3h98.7c12,0,22.7-7.7,26.5-19.1l29.6-88.2\n        c1.2-3.6,6.4-3.6,7.6,0l29.6,88.2c3.8,11.4,14.5,19.1,26.5,19.1h0l97.3,0c3.9,0,5.5,5,2.3,7.2L335.8,284.5z" />\n    </svg>\n'}\n    </a>\n`)(n);return`\n        <div class="favorite__player">\n            <a class="favorite__player--name">${e}</a>\n            <div class="favorite__player--action">\n                ${a}\n            </div>\n        </div>\n        `},v=(e,t)=>{const n=`\n    <div class="shop__itemsBox">\n        <div class="shop__itemTitle">\n            <h4>${e}</h4>\n        </div>\n        <div class="shop-items">\n            ${(e=>e.map((e=>(e=>`\n<div class="shop-item ${e.rarity}">\n    <img\n        src="${e.images.icon}" />\n    <div class="shop-item__price">\n        <img class="shop-item__price--img" src="https://image.fnbr.co/price/icon_vbucks.png">\n        <span>${e.price}</span>\n    </div>\n    <div class="shop-item__name">\n        <p>${e.name}</p>\n    </div>\n</div>\n`)(e))).join(""))(t)}\n        </div>\n    </div>\n    `;return n},p={},h=async t=>{if(t){if(p.search=new e(t),c(),s(a.body),await p.search.getStats(),p.search.data.error)return i(a.body),void a.main.insertAdjacentHTML("beforeend",'\n  <div class="error">\n    <h1>Player has not been found</h1>\n    <h2>Please check your player name and search again.</h2>\n  </div>\n  ');i(a.body),(e=>{const t=` \n  <section class="userContainer"> \n    <section class="userHeader">\n    <div class="userHeader__inner">\n        <div class="userHeader__avatar">\n            <img\n                src='${r[Math.floor(Math.random()*r.length)]}'>\n        </div>\n        <h2 class="userHeader__playerName">${e.epicUserHandle}</h2>\n    </div>\n    </section>\n    <section class="statsOverview">\n      <h1 class="statsOverview__heading">stats Overview</h1>\n      <div class="gridContainer">\n      ${(e=>{const t=(e=>{const t=e.filter((e=>!e.key.includes("Top"))),n={Wins:null,Kills:null,"Matches Played":null,Score:null,"Win%":null,"K/d":null};for(let e of t)n[e.key]=e.value;return n})(e);return Object.keys(t).map((e=>((e,t)=>{let n="",a="";return"Wins"===e||"Score"===e||"Kills"===e?(a=e,n="Total"):"K/d"===e?(a="kills",n="Per Death"):"Win%"===e?(n="Average",a="Win Rate"):(a="Matches",n="Played"),`\n        <div class="overviewCard">\n            <div>\n                <p class="overviewCard__subtitle">${n}</p>\n                <p class="overviewCard__title">${a}</p>\n            </div>\n            <div>\n                <p class="overviewCard__value">${t}</p>\n            </div>\n            <div class="overviewCard__rank">\n                <p>#1</p>\n            </div>\n        </div>\n  `})(e,t[e]))).join("")})(e.lifeTimeStats)}\n      </div>\n    </section>\n    <section class="playlist">\n    <div class="gridContainer">\n    ${o(e.stats.p2,"solo")}\n    ${o(e.stats.p10,"duos")}\n    ${o(e.stats.p9,"squad")}\n    </div>\n    </section>\n  </section>\n  `;a.main.insertAdjacentHTML("beforeend",t)})(p.search.data),p.favorite.addRecentPlayer(t)}};a.searchForm.addEventListener("submit",(e=>{e.preventDefault();const t=a.searchInput.value;h(t)})),a.searchNav.addEventListener("submit",(e=>{e.preventDefault();const t=a.navInput.value;h(t)}));const f=e=>{p.favorite||(p.favorite=new n),document.querySelector(".favorite")||a.searchForm.insertAdjacentHTML("beforeend",'\n    <div class="favorite">\n    <div class="favorite__tabs">\n        <a class="favorite__tabs--link active">Recent Searches</a>\n        <a class="favorite__tabs--link">Favorite</a>\n        <a class="favorite__tabs--link">Popular</a>\n    </div>\n    <div class="favorite__body">\n      \n    </div>\n</div>\n    '),document.querySelector(".favorite__body").innerHTML="",((e,t,n)=>{const a=e.map((e=>n.includes(e)?d(e,t,!0):d(e,t)));document.querySelector(".favorite__body").insertAdjacentHTML("beforeend",a.join(""))})(p.favorite.favorites[e],e,p.favorite.favorites.favorite)};a.searchInput.addEventListener("focus",(()=>{document.querySelector(".favorite")||f("recent")})),window.addEventListener("click",(e=>{if(!e.target.closest(".search__content")){const e=document.querySelector(".favorite");e&&e.remove()}})),window.addEventListener("click",(e=>{var t;e.target.matches(".favorite__tabs--link")&&(t=e.target,Array.from(document.querySelectorAll(".favorite__tabs--link")).forEach((e=>{e.classList.remove("active")})),t.classList.add("active"),"Favorite"===e.target.innerText&&f("favorite"),"Recent Searches"===e.target.innerText&&f("recent"),"Popular"===e.target.innerText&&f("popular"))})),window.addEventListener("click",(e=>{const t=e.target.closest(".favorite__player--icon");if(t){const e=t.parentNode.parentNode.children[0];p.favorite.isAddedToFavorite(e.innerText)?(p.favorite.removeFavoritePlayer(e.innerText),l(t,!1),t.parentNode.parentNode.remove()):(p.favorite.addPlayerToFavorite(e.innerText),l(t,!0))}})),window.addEventListener("load",(async()=>{p.favorite=new n,p.favorite.readLocalStorage()})),window.addEventListener("click",(e=>{const t=e.target.closest(".favorite__player--name");t&&h(t.innerText)})),document.getElementById("shop").addEventListener("click",(e=>{(async()=>{p.shop||(p.shop=new class{constructor(){this.data={}}async getShopItems(){const e=await fetch("https://fnbr.co/api/shop",{method:"GET",headers:{"x-api-key":"0332575c-faea-4ebd-886e-bc83c74de080"}}),{data:t}=await e.json();this.data={...this.data,daily:t.daily,featured:t.featured,date:t.date}}}),c(),s(a.body),await p.shop.getShopItems(),i(a.body),(e=>{console.log(e);const t=`\n    <section class="shop">\n        <div class="shop__container">\n            <div class="shop__date">\n              <div class="shop__date--box">\n              ${(e=>{const t=new Date(e);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]} ${t.getDate()}, ${t.getFullYear()}`})(e.date)}\n              </div>\n            </div>\n            ${v("Daily Items",e.daily)}\n            ${v("Featured Items",e.featured)}\n        </div>\n    </section> --\x3e\n    `;a.main.insertAdjacentHTML("beforeend",t)})(p.shop.data)})()}))})();